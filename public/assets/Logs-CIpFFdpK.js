import{u as W,N as J,L as s,D as K,O as Q}from"./composables-UoHeEaP2.js";import{x as X,M as Y,v as Z,c as T,d as ee,a7 as te,p as le,H as C,z as u,B as e,A as t,G as g,E as i,u as n,y as f,C as v,i as y,I,J as ae,am as R,D as A}from"./vue-POwbTJ1u.js";import{d as se,a as ne}from"./stores-CVPgn2b-.js";import{u as oe,m as V,e as E,n as F,o as m,p as re,q as ue,r as c,i as ie,s as B,t as de,v as me,w as ce,d as pe,x as ge,y as fe}from"./vuetify-NcYkVwk0.js";const ve={class:"pa-3"},ye={style:{"font-size":"1.6em !important"},class:"subtitle-1 ml-2"},Ve={class:"d-flex justify-end"},he={class:"d-flex mr-8 overflow-hidden"},ke={class:"d-flex"},we=X({__name:"Logs",setup(Le){const O=Y(),{t:P}=W(),{current:U}=oe(),h=se(),{filteredLogs:$,logTypeFilter:r,logMessageFilter:k,paginatedResults:M,currentPage:d,pageCount:p,reverseSort:L}=Z(h),D=ne(),j=T(()=>({light:{normal:"black",info:"blue",warning:"orange",critical:"red"},dark:{normal:"white",info:"deepskyblue",warning:"darkorange",critical:new J("darkred").lighten(12).toString()}})),_=ee([{title:s[s.NORMAL],value:s.NORMAL},{title:s[s.INFO],value:s.INFO},{title:s[s.WARNING],value:s.WARNING},{title:s[s.CRITICAL],value:s.CRITICAL}]),x=T(()=>r.value.length>0),w=T(()=>r.value.length===_.value.length),N=()=>{O.push({name:"dashboard"})},S=a=>`color: ${j.value[U.value.dark?"dark":"light"][s[a.type].toLowerCase()]}`,z=a=>s[a.type],G=a=>Q(a.timestamp*1e3).format(D.dateFormat),q=()=>{w.value?r.value=[]:r.value=_.value.map(a=>a.value)},b=a=>{a.key==="Escape"&&N()};return te(async()=>{document.addEventListener("keydown",b),await h.cleanAndFetchLogs(),K(h.updateLogs,15e3)}),le(()=>{document.removeEventListener("keydown",b)}),(a,o)=>(u(),C("div",ve,[e(F,{"no-gutters":"",align:"center",justify:"center"},{default:t(()=>[e(V,null,{default:t(()=>[g("h1",ye,i(n(P)("logs.title")),1)]),_:1}),e(V,null,{default:t(()=>[g("div",Ve,[e(E,{icon:n(L)?"mdi-sort-descending":"mdi-sort-ascending",variant:"plain",onClick:o[0]||(o[0]=l=>L.value=!n(L))},null,8,["icon"]),e(E,{icon:"mdi-close",variant:"plain",onClick:N})])]),_:1})]),_:1}),e(fe,null,{default:t(()=>[e(m,null,{default:t(()=>[e(F,null,{default:t(()=>[e(V,{cols:"6"},{default:t(()=>[e(re,{modelValue:n(r),"onUpdate:modelValue":o[1]||(o[1]=l=>y(r)?r.value=l:null),items:_.value,label:a.$t("logs.filters.type"),"hide-details":"",multiple:"",chips:""},{"prepend-item":t(()=>[e(m,{title:a.$t("common.selectAll"),onClick:q},{prepend:t(()=>[e(ue,{indeterminate:x.value&&!w.value,"model-value":x.value},null,8,["indeterminate","model-value"])]),_:1},8,["title"]),e(c)]),_:1},8,["modelValue","items","label"])]),_:1}),e(V,{cols:"6"},{default:t(()=>[e(ie,{modelValue:n(k),"onUpdate:modelValue":o[2]||(o[2]=l=>y(k)?k.value=l:null),label:a.$t("logs.filters.query"),"hide-details":"",clearable:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),e(c,{class:"my-3",thickness:"5"}),n(p)>1?(u(),f(m,{key:0},{default:t(()=>[e(B,{modelValue:n(d),"onUpdate:modelValue":o[3]||(o[3]=l=>y(d)?d.value=l:null),length:n(p),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):v("",!0),e(c),(u(!0),C(I,null,ae(n(M),(l,H)=>(u(),C(I,null,[H>0?(u(),f(c,{key:0})):v("",!0),e(m,{class:"pa-0"},{default:t(()=>[e(de,{class:"p-0"},{default:t(()=>[e(me,{class:"pa-0"},{default:t(()=>[e(ce,{class:"text-no-wrap",style:R(S(l))},{default:t(()=>[g("div",he,"["+i(l.id)+"] "+i(l.message),1),e(pe),g("div",ke,i(G(l)),1)]),_:2},1032,["style"]),e(ge,{class:"wrap-word text-select",style:R(S(l))},{default:t(()=>[A(" ["+i(z(l))+"] "+i(l.message),1)]),_:2},1032,["style"])]),_:2},1024)]),_:2},1024)]),_:2},1024)],64))),256)),n($).length===0?(u(),f(m,{key:1},{default:t(()=>[A(i(a.$t("logs.emptyLogList")),1)]),_:1})):v("",!0),e(c),n(p)>1?(u(),f(m,{key:2},{default:t(()=>[e(B,{modelValue:n(d),"onUpdate:modelValue":o[4]||(o[4]=l=>y(d)?d.value=l:null),length:n(p),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):v("",!0)]),_:1})]))}});export{we as default};
