import{x as B,d as g,m as G,a7 as F,y as C,z as f,A as t,B as l,D as s,E as r,u as b,al as N,aj as c,C as T,H as P,i as K}from"./vue-POwbTJ1u.js";import{u as E,a as R}from"./composables-UoHeEaP2.js";import{b as J,c as L}from"./stores-CVPgn2b-.js";import{V as j,a as q,b as A,k as I,i as p,l as M,j as O,c as z,d as H,e as $,f as X}from"./vuetify-NcYkVwk0.js";const Q={key:0,class:"text-warning"},x=B({__name:"CategoryFormDialog",props:{guid:{},initialCategory:{}},emits:["submit"],setup(w,{emit:k}){const i=w,S=k,{t:m}=E(),v=J(),{isOpened:d}=R(i.guid),U=g(),u=g(!1),D=[a=>!!a||m("dialogs.category.nameRequired")],o=G({name:"",savePath:""});async function y(){u.value&&(i.initialCategory?await v.editCategory(o,i.initialCategory.name===o.name?void 0:i.initialCategory.name):await v.createCategory(o),S("submit",o),V())}const V=()=>{d.value=!1};return F(()=>{o.name=i.initialCategory?.name||"",o.savePath=i.initialCategory?.savePath||""}),(a,e)=>(f(),C(X,{modelValue:b(d),"onUpdate:modelValue":e[4]||(e[4]=n=>K(d)?d.value=n:null)},{default:t(()=>[l(j,null,{default:t(()=>[l(q,null,{default:t(()=>[s(r(a.$t(`dialogs.category.title.${a.initialCategory?"edit":"create"}`)),1)]),_:1}),l(A,null,{default:t(()=>[l(b(I),{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=n=>u.value=n),ref_key:"form",ref:U,onSubmit:e[3]||(e[3]=c(()=>{},["prevent"])),onKeydown:N(c(y,["prevent"]),["enter"])},{default:t(()=>[a.initialCategory?(f(),C(p,{key:0,"model-value":a.initialCategory.name,disabled:"",label:a.$t("dialogs.category.oldName")},null,8,["model-value","label"])):T("",!0),l(p,{modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=n=>o.name=n),rules:D,autofocus:!a.initialCategory,label:a.$t("dialogs.category.name")},null,8,["modelValue","autofocus","label"]),l(p,{modelValue:o.savePath,"onUpdate:modelValue":e[1]||(e[1]=n=>o.savePath=n),autofocus:!!a.initialCategory,label:a.$t("dialogs.category.savePath")},null,8,["modelValue","autofocus","label"]),l(M,null,{default:t(()=>[a.initialCategory&&a.initialCategory.name!==o.name?(f(),P("div",Q,[l(O,null,{default:t(()=>e[5]||(e[5]=[s("mdi-alert")])),_:1}),s(" "+r(a.$t("dialogs.category.warnEdit")),1)])):T("",!0)]),_:1})]),_:1},8,["modelValue","onKeydown"])]),_:1}),l(z,null,{default:t(()=>[l(H),l($,{color:"error",onClick:V},{default:t(()=>[s(r(a.$t("common.cancel")),1)]),_:1}),l($,{color:"accent",disabled:!u.value,onClick:y},{default:t(()=>[s(r(a.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),W={key:0,class:"text-warning"},aa=B({__name:"TagFormDialog",props:{guid:{},initialTag:{}},emits:["submit"],setup(w,{emit:k}){const i=w,S=k,{isOpened:m}=R(i.guid),{t:v}=E(),d=L(),U=g(),u=g(!1),D=g([a=>!!a||v("dialogs.tag.required"),a=>!i.initialTag||!!i.initialTag&&!a.includes(",")||v("dialogs.tag.comma")]),o=g("");async function y(){if(!u.value)return;let a;i.initialTag?(a=[o.value],await d.editTag(i.initialTag,o.value)):(a=o.value.split(","),await d.createTags(a)),S("submit",a),V()}const V=()=>{m.value=!1};return F(()=>{o.value=i.initialTag||""}),(a,e)=>(f(),C(X,{modelValue:b(m),"onUpdate:modelValue":e[3]||(e[3]=n=>K(m)?m.value=n:null)},{default:t(()=>[l(j,null,{default:t(()=>[l(q,null,{default:t(()=>[s(r(a.$t(`dialogs.tag.title.${a.initialTag?"rename":"create"}`)),1)]),_:1}),l(A,null,{default:t(()=>[l(b(I),{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=n=>u.value=n),ref_key:"form",ref:U,onSubmit:e[2]||(e[2]=c(()=>{},["prevent"])),onKeydown:N(c(y,["prevent"]),["enter"])},{default:t(()=>[a.initialTag?(f(),C(p,{key:0,"model-value":a.initialTag,disabled:"",label:a.$t("dialogs.tag.oldName")},null,8,["model-value","label"])):T("",!0),l(p,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=n=>o.value=n),rules:D.value,autofocus:"",hint:a.$t("dialogs.tag.hint"),label:a.$t("dialogs.tag.name")},null,8,["modelValue","rules","hint","label"]),l(M,null,{default:t(()=>[a.initialTag&&a.initialTag!==o.value?(f(),P("div",W,[l(O,null,{default:t(()=>e[4]||(e[4]=[s("mdi-alert")])),_:1}),s(" "+r(a.$t("dialogs.tag.warnEdit")),1)])):T("",!0)]),_:1})]),_:1},8,["modelValue","onKeydown"])]),_:1}),l(z,null,{default:t(()=>[l(H),l($,{color:"error",onClick:V},{default:t(()=>[s(r(a.$t("common.cancel")),1)]),_:1}),l($,{color:"accent",disabled:!u.value,onClick:y},{default:t(()=>[s(r(a.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});export{aa as _,x as a};
