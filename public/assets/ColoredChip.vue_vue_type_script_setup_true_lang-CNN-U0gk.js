import{o as O,j as P,d as I,O as K,y as N,r as _,P as U,V as j,a as L,b as q,k as z,i as G,c as J,e as R,f as Q,u as W,Q as X}from"./vuetify-CD4-mpuW.js";import{y as $,ag as Y,z as u,D as i,A as t,B as o,H as Z,I as h,C as l,E as V,F as y,J as w,K as E,ao as x,ap as ee,G as F,d as S,p as ae,c as v,a7 as te,u as B,aj as oe,al as le,i as se,x as re,am as ne}from"./vue-HTiJSGKx.js";import{a as ue}from"./index-B-XyRWwO.js";import{a as de,u as A,V as ie,a1 as H}from"./composables-Canf55cQ.js";import{j as me,a as ce}from"./stores-Be8I50wv.js";const ye={class:"d-flex"},fe={key:2},pe={key:3},he=$({__name:"RightClickMenuEntry",props:{entryData:{}},setup(f){const a=f,r=()=>{a.entryData.action&&a.entryData.action()};return(e,n)=>{const m=Y("RightClickMenuEntry",!0);return e.entryData.hidden?i("",!0):(t(),u(O,{key:0,class:"px-3",disabled:e.entryData.disabled,onClick:r},{default:o(()=>[Z("div",ye,[e.entryData.disabled&&e.entryData.disabledIcon?(t(),u(P,{key:0,class:"mr-2"},{default:o(()=>[V(y(e.entryData.disabledIcon),1)]),_:1})):e.entryData.icon?(t(),u(P,{key:1,class:"mr-2"},{default:o(()=>[V(y(e.entryData.icon),1)]),_:1})):i("",!0),e.entryData.disabled&&e.entryData.disabledText?(t(),h("span",fe,y(e.entryData.disabledText),1)):(t(),h("span",pe,y(e.entryData.text),1)),l(I),!e.entryData.disabled&&e.entryData.children?(t(),u(P,{key:4},{default:o(()=>n[0]||(n[0]=[V("mdi-chevron-right")])),_:1})):i("",!0)]),e.entryData.children?(t(),u(K,{key:0,activator:"parent","open-on-hover":"","open-on-click":"","close-delay":"10","open-delay":"0",location:"right"},{default:o(()=>[l(N,null,{default:o(()=>[e.entryData.slots?.top?(t(),h(w,{key:0},[(t(!0),h(w,null,E(e.entryData.slots.top,d=>(t(),u(m,{entryData:d},null,8,["entryData"]))),256)),l(_,{thickness:"3"})],64)):i("",!0),l(U,{items:e.entryData.children,"item-height":"48",renderless:""},{default:o(({item:d})=>[l(m,{entryData:d},null,8,["entryData"])]),_:1},8,["items"]),e.entryData.slots?.bottom?(t(),h(w,{key:1},[l(_,{thickness:"3"}),(t(!0),h(w,null,E(e.entryData.slots.bottom,d=>(t(),u(m,{entryData:d},null,8,["entryData"]))),256))],64)):i("",!0)]),_:1})]),_:1})):i("",!0)]),_:1},8,["disabled"]))}}}),be=$({__name:"RightClickMenu",props:x({menuData:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const a=ee(f,"modelValue");return(r,e)=>a.value?(t(),u(K,{key:0,modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value=n),activator:"parent","close-on-content-click":"",transition:"slide-y-transition","scroll-strategy":"none"},{default:o(()=>[l(N,null,{default:o(()=>[F(r.$slots,"top"),r.$slots.top?(t(),u(_,{key:0,thickness:"3"})):i("",!0),l(U,{items:r.menuData,"item-height":"48",renderless:""},{default:o(({item:n})=>[l(he,{entryData:n},null,8,["entryData"])]),_:1},8,["items"]),r.$slots.bottom?(t(),u(_,{key:1,thickness:"3"})):i("",!0),F(r.$slots,"bottom")]),_:3})]),_:3},8,["modelValue"])):i("",!0)}}),ge=$({__name:"MoveTorrentDialog",props:{guid:{},hashes:{},mode:{}},setup(f){const a=f,{isOpened:r}=de(a.guid),{t:e}=A(),n=me(),m=S(),d=S(),k=S(!1),p=ae({newPath:""}),M=[s=>!!s||e("dialogs.moveTorrent.required")],g=v(()=>a.hashes.map(n.getTorrentByHash)),D=v(()=>{switch(a.mode){case"dl":return g.value[0]?.download_path;case"save":return g.value[0]?.savePath}});async function C(){await m.value?.validate(),k.value&&(await n.toggleAutoTmm(a.hashes,!1),await n.moveTorrents(a.mode,a.hashes,p.newPath),d.value?.saveValueToHistory(),T())}const T=()=>{r.value=!1};return te(()=>{p.newPath=D.value||""}),(s,c)=>(t(),u(Q,{modelValue:B(r),"onUpdate:modelValue":c[3]||(c[3]=b=>se(r)?r.value=b:null)},{default:o(()=>[l(j,null,{default:o(()=>[l(L,null,{default:o(()=>[V(y(s.$t(`dialogs.moveTorrent.${s.mode}.title`)),1)]),_:1}),l(q,null,{default:o(()=>[l(B(z),{modelValue:k.value,"onUpdate:modelValue":c[1]||(c[1]=b=>k.value=b),ref_key:"form",ref:m,onSubmit:c[2]||(c[2]=oe(()=>{},["prevent"]))},{default:o(()=>[D.value?(t(),u(G,{key:0,"model-value":D.value,disabled:"",label:s.$t("dialogs.moveTorrent.oldPath")},null,8,["model-value","label"])):i("",!0),l(ue,{modelValue:p.newPath,"onUpdate:modelValue":c[0]||(c[0]=b=>p.newPath=b),historyKey:B(ie).TORRENT_PATH,ref_key:"field",ref:d,rules:M,autofocus:"",label:s.$t("dialogs.moveTorrent.newPath"),onKeydown:le(C,["enter"])},null,8,["modelValue","historyKey","label"])]),_:1},8,["modelValue"])]),_:1}),l(J,null,{default:o(()=>[l(I),l(R,{color:"error",onClick:T},{default:o(()=>[V(y(s.$t("common.cancel")),1)]),_:1}),l(R,{color:"accent",disabled:!k.value,onClick:C},{default:o(()=>[V(y(s.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Te=$({__name:"ColoredChip",props:{defaultColor:{},disabled:{type:Boolean,default:!1},disabledValue:{},value:{}},setup(f){const a=f,{t:r}=A(),{current:e}=W(),n=ce(),{enableHashColors:m,hideColoredChip:d}=re(n);function k(s){return e.value.colors[s]??s}function p(s){return M.value?s.darken(30):s}const M=v(()=>n.theme.mode==="dark"&&n.theme.dark==="dark-oled"),g=v(()=>a.disabled||!m.value?a.defaultColor:H(a.value,p)),D=v(()=>a.disabled||!m.value?k(a.defaultColor):H(a.value,p)),C=v(()=>a.disabled?a.disabledValue||a.value||r("common.none"):a.value),T=v(()=>!d.value);return(s,c)=>T.value?(t(),u(X,{key:0,color:g.value,variant:"flat"},{default:o(()=>[V(y(C.value),1)]),_:1},8,["color"])):(t(),h("div",{key:1,class:"text-no-wrap",style:ne(`color: ${D.value}`)},y(C.value),5))}});export{be as _,ge as a,Te as b};
